{"ast":null,"code":"var _jsxFileName = \"/home/riddle/uchart/KLineChartSample/react-sample/src/chart/UpdateKLineChart.jsx\";\nimport React, { useEffect } from 'react';\nimport { init, dispose } from 'klinecharts';\nimport generatedKLineDataList from '../utils/generatedKLineDataList';\nimport Layout from '../Layout';\nexport default function UpdateKLineChart() {\n  function updateData(kLineChart) {\n    setTimeout(() => {\n      if (kLineChart) {\n        const dataList = kLineChart.getDataList();\n        const lastData = dataList[dataList.length - 1];\n        const newData = generatedKLineDataList(lastData.timestamp, lastData.close, 1)[0];\n        newData.timestamp += 1000 * 60;\n        kLineChart.updateData(newData);\n      }\n\n      updateData(kLineChart);\n    }, 1000);\n  }\n\n  useEffect(() => {\n    const kLineChart = init('update-k-line');\n    kLineChart.applyNewData(generatedKLineDataList());\n    updateData(kLineChart);\n    return () => {\n      dispose('update-k-line');\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"\\u5B9E\\u65F6\\u66F4\\u65B0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"update-k-line\",\n    className: \"k-line-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/riddle/uchart/KLineChartSample/react-sample/src/chart/UpdateKLineChart.jsx"],"names":["React","useEffect","init","dispose","generatedKLineDataList","Layout","UpdateKLineChart","updateData","kLineChart","setTimeout","dataList","getDataList","lastData","length","newData","timestamp","close","applyNewData"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,aAA9B;AACA,OAAOC,sBAAP,MAAmC,iCAAnC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe,SAASC,gBAAT,GAA6B;AAC1C,WAASC,UAAT,CAAqBC,UAArB,EAAiC;AAC/BC,IAAAA,UAAU,CAAC,MAAM;AACf,UAAID,UAAJ,EAAgB;AACd,cAAME,QAAQ,GAAGF,UAAU,CAACG,WAAX,EAAjB;AACA,cAAMC,QAAQ,GAAGF,QAAQ,CAACA,QAAQ,CAACG,MAAT,GAAkB,CAAnB,CAAzB;AACA,cAAMC,OAAO,GAAGV,sBAAsB,CAACQ,QAAQ,CAACG,SAAV,EAAqBH,QAAQ,CAACI,KAA9B,EAAqC,CAArC,CAAtB,CAA8D,CAA9D,CAAhB;AACAF,QAAAA,OAAO,CAACC,SAAR,IAAqB,OAAO,EAA5B;AACAP,QAAAA,UAAU,CAACD,UAAX,CAAsBO,OAAtB;AACD;;AACDP,MAAAA,UAAU,CAACC,UAAD,CAAV;AACD,KATS,EASP,IATO,CAAV;AAUD;;AAEDP,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMO,UAAU,GAAGN,IAAI,CAAC,eAAD,CAAvB;AACAM,IAAAA,UAAU,CAACS,YAAX,CAAwBb,sBAAsB,EAA9C;AACAG,IAAAA,UAAU,CAACC,UAAD,CAAV;AACA,WAAO,MAAM;AACXL,MAAAA,OAAO,CAAC,eAAD,CAAP;AACD,KAFD;AAGD,GAPQ,EAON,EAPM,CAAT;AAQA,sBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,0BADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,EAAE,EAAC,eAAR;AAAwB,IAAA,SAAS,EAAC,cAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD","sourcesContent":["import React, { useEffect } from 'react'\nimport { init, dispose } from 'klinecharts'\nimport generatedKLineDataList from '../utils/generatedKLineDataList'\nimport Layout from '../Layout'\n\nexport default function UpdateKLineChart () {\n  function updateData (kLineChart) {\n    setTimeout(() => {\n      if (kLineChart) {\n        const dataList = kLineChart.getDataList()\n        const lastData = dataList[dataList.length - 1]\n        const newData = generatedKLineDataList(lastData.timestamp, lastData.close, 1)[0]\n        newData.timestamp += 1000 * 60\n        kLineChart.updateData(newData)\n      }\n      updateData(kLineChart)\n    }, 1000)\n  }\n\n  useEffect(() => {\n    const kLineChart = init('update-k-line')\n    kLineChart.applyNewData(generatedKLineDataList())\n    updateData(kLineChart)\n    return () => {\n      dispose('update-k-line')\n    }\n  }, [])\n  return (\n    <Layout\n      title=\"实时更新\">\n      <div id=\"update-k-line\" className=\"k-line-chart\"/>\n    </Layout>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/riddle/uchart/KLineChartSample/react-sample/src/chart/CustomCandleMarkKLineChart.jsx\";\nimport React, { useEffect } from 'react';\nimport { init, dispose } from 'klinecharts';\nimport generatedKLineDataList from '../utils/generatedKLineDataList';\nimport Layout from '../Layout';\nexport default function CustomCandleMarkKLineChart() {\n  function annotationDrawExtend(ctx, coordinate, text) {\n    ctx.font = '12px Roboto';\n    ctx.fillStyle = '#2d6187';\n    ctx.strokeStyle = '#2d6187';\n    const textWidth = ctx.measureText(text).width;\n    const startX = coordinate.x;\n    let startY = coordinate.y + 6;\n    ctx.beginPath();\n    ctx.moveTo(startX, startY);\n    startY += 5;\n    ctx.lineTo(startX - 4, startY);\n    ctx.lineTo(startX + 4, startY);\n    ctx.closePath();\n    ctx.fill();\n    const rectX = startX - textWidth / 2 - 6;\n    const rectY = startY;\n    const rectWidth = textWidth + 12;\n    const rectHeight = 28;\n    const r = 2;\n    ctx.beginPath();\n    ctx.moveTo(rectX + r, rectY);\n    ctx.arcTo(rectX + rectWidth, rectY, rectX + rectWidth, rectY + rectHeight, r);\n    ctx.arcTo(rectX + rectWidth, rectY + rectHeight, rectX, rectY + rectHeight, r);\n    ctx.arcTo(rectX, rectY + rectHeight, rectX, rectY, r);\n    ctx.arcTo(rectX, rectY, rectX + rectWidth, rectY, r);\n    ctx.closePath();\n    ctx.fill();\n    ctx.fillStyle = '#fff';\n    ctx.textBaseline = 'middle';\n    ctx.textAlign = 'center';\n    ctx.fillText(text, startX, startY + 14);\n  }\n\n  useEffect(() => {\n    const kLineChart = init('custom-candle-mark-k-line');\n    const kLineDataList = generatedKLineDataList();\n    kLineChart.applyNewData(kLineDataList);\n    kLineChart.createAnnotation([{\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 10].timestamp\n      },\n      drawExtend: params => {\n        const {\n          ctx,\n          coordinate\n        } = params;\n        annotationDrawExtend(ctx, coordinate, '这是一个固定显示标记');\n      }\n    }, {\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 20].timestamp\n      },\n      styles: {\n        symbol: {\n          type: 'circle'\n        }\n      }\n    }, {\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 22].timestamp\n      },\n      styles: {\n        symbol: {\n          type: 'rect'\n        }\n      }\n    }, {\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 40].timestamp\n      },\n      drawExtend: params => {\n        const {\n          ctx,\n          coordinate,\n          isActive\n        } = params;\n\n        if (isActive) {\n          annotationDrawExtend(ctx, coordinate, '这是一个鼠标移入显示标记');\n        }\n      }\n    }, {\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 46].timestamp\n      },\n      styles: {\n        symbol: {\n          type: 'triangle'\n        }\n      }\n    }, {\n      point: {\n        timestamp: kLineDataList[kLineDataList.length - 45].timestamp,\n        price: kLineDataList[kLineDataList.length - 45].high\n      },\n      styles: {\n        symbol: {\n          position: 'point',\n          offset: [0, -30]\n        }\n      }\n    }]);\n    return () => {\n      dispose('custom-candle-mark-k-line');\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"\\u81EA\\u5B9A\\u4E49\\u8721\\u70DB\\u56FE\\u6807\\u8BB0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"custom-candle-mark-k-line\",\n    className: \"k-line-chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/riddle/uchart/KLineChartSample/react-sample/src/chart/CustomCandleMarkKLineChart.jsx"],"names":["React","useEffect","init","dispose","generatedKLineDataList","Layout","CustomCandleMarkKLineChart","annotationDrawExtend","ctx","coordinate","text","font","fillStyle","strokeStyle","textWidth","measureText","width","startX","x","startY","y","beginPath","moveTo","lineTo","closePath","fill","rectX","rectY","rectWidth","rectHeight","r","arcTo","textBaseline","textAlign","fillText","kLineChart","kLineDataList","applyNewData","createAnnotation","point","timestamp","length","drawExtend","params","styles","symbol","type","isActive","price","high","position","offset"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,aAA9B;AACA,OAAOC,sBAAP,MAAmC,iCAAnC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe,SAASC,0BAAT,GAAuC;AACpD,WAASC,oBAAT,CAA+BC,GAA/B,EAAoCC,UAApC,EAAgDC,IAAhD,EAAsD;AACpDF,IAAAA,GAAG,CAACG,IAAJ,GAAW,aAAX;AACAH,IAAAA,GAAG,CAACI,SAAJ,GAAgB,SAAhB;AACAJ,IAAAA,GAAG,CAACK,WAAJ,GAAkB,SAAlB;AAEA,UAAMC,SAAS,GAAGN,GAAG,CAACO,WAAJ,CAAgBL,IAAhB,EAAsBM,KAAxC;AACA,UAAMC,MAAM,GAAGR,UAAU,CAACS,CAA1B;AACA,QAAIC,MAAM,GAAGV,UAAU,CAACW,CAAX,GAAe,CAA5B;AACAZ,IAAAA,GAAG,CAACa,SAAJ;AACAb,IAAAA,GAAG,CAACc,MAAJ,CAAWL,MAAX,EAAmBE,MAAnB;AACAA,IAAAA,MAAM,IAAI,CAAV;AACAX,IAAAA,GAAG,CAACe,MAAJ,CAAWN,MAAM,GAAG,CAApB,EAAuBE,MAAvB;AACAX,IAAAA,GAAG,CAACe,MAAJ,CAAWN,MAAM,GAAG,CAApB,EAAuBE,MAAvB;AACAX,IAAAA,GAAG,CAACgB,SAAJ;AACAhB,IAAAA,GAAG,CAACiB,IAAJ;AAEA,UAAMC,KAAK,GAAGT,MAAM,GAAGH,SAAS,GAAG,CAArB,GAAyB,CAAvC;AACA,UAAMa,KAAK,GAAGR,MAAd;AACA,UAAMS,SAAS,GAAGd,SAAS,GAAG,EAA9B;AACA,UAAMe,UAAU,GAAG,EAAnB;AACA,UAAMC,CAAC,GAAG,CAAV;AACAtB,IAAAA,GAAG,CAACa,SAAJ;AACAb,IAAAA,GAAG,CAACc,MAAJ,CAAWI,KAAK,GAAGI,CAAnB,EAAsBH,KAAtB;AACAnB,IAAAA,GAAG,CAACuB,KAAJ,CAAUL,KAAK,GAAGE,SAAlB,EAA6BD,KAA7B,EAAoCD,KAAK,GAAGE,SAA5C,EAAuDD,KAAK,GAAGE,UAA/D,EAA2EC,CAA3E;AACAtB,IAAAA,GAAG,CAACuB,KAAJ,CAAUL,KAAK,GAAGE,SAAlB,EAA6BD,KAAK,GAAGE,UAArC,EAAiDH,KAAjD,EAAwDC,KAAK,GAAGE,UAAhE,EAA4EC,CAA5E;AACAtB,IAAAA,GAAG,CAACuB,KAAJ,CAAUL,KAAV,EAAiBC,KAAK,GAAGE,UAAzB,EAAqCH,KAArC,EAA4CC,KAA5C,EAAmDG,CAAnD;AACAtB,IAAAA,GAAG,CAACuB,KAAJ,CAAUL,KAAV,EAAiBC,KAAjB,EAAwBD,KAAK,GAAGE,SAAhC,EAA2CD,KAA3C,EAAkDG,CAAlD;AACAtB,IAAAA,GAAG,CAACgB,SAAJ;AACAhB,IAAAA,GAAG,CAACiB,IAAJ;AAEAjB,IAAAA,GAAG,CAACI,SAAJ,GAAgB,MAAhB;AACAJ,IAAAA,GAAG,CAACwB,YAAJ,GAAmB,QAAnB;AACAxB,IAAAA,GAAG,CAACyB,SAAJ,GAAgB,QAAhB;AACAzB,IAAAA,GAAG,CAAC0B,QAAJ,CAAaxB,IAAb,EAAmBO,MAAnB,EAA2BE,MAAM,GAAG,EAApC;AACD;;AAEDlB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkC,UAAU,GAAGjC,IAAI,CAAC,2BAAD,CAAvB;AACA,UAAMkC,aAAa,GAAGhC,sBAAsB,EAA5C;AACA+B,IAAAA,UAAU,CAACE,YAAX,CAAwBD,aAAxB;AACAD,IAAAA,UAAU,CAACG,gBAAX,CAA4B,CAC1B;AACEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD;AAAtD,OADT;AAEEE,MAAAA,UAAU,EAAGC,MAAD,IAAY;AACtB,cAAM;AAAEnC,UAAAA,GAAF;AAAOC,UAAAA;AAAP,YAAsBkC,MAA5B;AACApC,QAAAA,oBAAoB,CAACC,GAAD,EAAMC,UAAN,EAAkB,YAAlB,CAApB;AACD;AALH,KAD0B,EAOvB;AACD8B,MAAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD;AAAtD,OADN;AAEDI,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AACNC,UAAAA,IAAI,EAAE;AADA;AADF;AAFP,KAPuB,EAcvB;AACDP,MAAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD;AAAtD,OADN;AAEDI,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AACNC,UAAAA,IAAI,EAAE;AADA;AADF;AAFP,KAduB,EAqBvB;AACDP,MAAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD;AAAtD,OADN;AAEDE,MAAAA,UAAU,EAAGC,MAAD,IAAY;AACtB,cAAM;AAAEnC,UAAAA,GAAF;AAAOC,UAAAA,UAAP;AAAmBsC,UAAAA;AAAnB,YAAgCJ,MAAtC;;AACA,YAAII,QAAJ,EAAc;AACZxC,UAAAA,oBAAoB,CAACC,GAAD,EAAMC,UAAN,EAAkB,cAAlB,CAApB;AACD;AACF;AAPA,KArBuB,EA6BvB;AACD8B,MAAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD;AAAtD,OADN;AAEDI,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AACNC,UAAAA,IAAI,EAAE;AADA;AADF;AAFP,KA7BuB,EAoCvB;AACDP,MAAAA,KAAK,EAAE;AACLC,QAAAA,SAAS,EAAEJ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCD,SAD/C;AAC0DQ,QAAAA,KAAK,EAAEZ,aAAa,CAACA,aAAa,CAACK,MAAd,GAAuB,EAAxB,CAAb,CAAyCQ;AAD1G,OADN;AAIDL,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AACNK,UAAAA,QAAQ,EAAE,OADJ;AAENC,UAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAC,EAAL;AAFF;AADF;AAJP,KApCuB,CAA5B;AAgDA,WAAO,MAAM;AACXhD,MAAAA,OAAO,CAAC,2BAAD,CAAP;AACD,KAFD;AAGD,GAvDQ,EAuDN,EAvDM,CAAT;AAwDA,sBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,kDADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,EAAE,EAAC,2BAAR;AAAoC,IAAA,SAAS,EAAC,cAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD","sourcesContent":["import React, { useEffect } from 'react'\nimport { init, dispose } from 'klinecharts'\nimport generatedKLineDataList from '../utils/generatedKLineDataList'\nimport Layout from '../Layout'\n\nexport default function CustomCandleMarkKLineChart () {\n  function annotationDrawExtend (ctx, coordinate, text) {\n    ctx.font = '12px Roboto'\n    ctx.fillStyle = '#2d6187'\n    ctx.strokeStyle = '#2d6187'\n\n    const textWidth = ctx.measureText(text).width\n    const startX = coordinate.x\n    let startY = coordinate.y + 6\n    ctx.beginPath()\n    ctx.moveTo(startX, startY)\n    startY += 5\n    ctx.lineTo(startX - 4, startY)\n    ctx.lineTo(startX + 4, startY)\n    ctx.closePath()\n    ctx.fill()\n\n    const rectX = startX - textWidth / 2 - 6\n    const rectY = startY\n    const rectWidth = textWidth + 12\n    const rectHeight = 28\n    const r = 2\n    ctx.beginPath()\n    ctx.moveTo(rectX + r, rectY)\n    ctx.arcTo(rectX + rectWidth, rectY, rectX + rectWidth, rectY + rectHeight, r)\n    ctx.arcTo(rectX + rectWidth, rectY + rectHeight, rectX, rectY + rectHeight, r)\n    ctx.arcTo(rectX, rectY + rectHeight, rectX, rectY, r)\n    ctx.arcTo(rectX, rectY, rectX + rectWidth, rectY, r)\n    ctx.closePath()\n    ctx.fill()\n\n    ctx.fillStyle = '#fff'\n    ctx.textBaseline = 'middle'\n    ctx.textAlign = 'center'\n    ctx.fillText(text, startX, startY + 14)\n  }\n\n  useEffect(() => {\n    const kLineChart = init('custom-candle-mark-k-line')\n    const kLineDataList = generatedKLineDataList()\n    kLineChart.applyNewData(kLineDataList)\n    kLineChart.createAnnotation([\n      {\n        point: { timestamp: kLineDataList[kLineDataList.length - 10].timestamp },\n        drawExtend: (params) => {\n          const { ctx, coordinate } = params\n          annotationDrawExtend(ctx, coordinate, '这是一个固定显示标记')\n        }\n      }, {\n        point: { timestamp: kLineDataList[kLineDataList.length - 20].timestamp },\n        styles: {\n          symbol: {\n            type: 'circle'\n          }\n        }\n      }, {\n        point: { timestamp: kLineDataList[kLineDataList.length - 22].timestamp },\n        styles: {\n          symbol: {\n            type: 'rect'\n          }\n        }\n      }, {\n        point: { timestamp: kLineDataList[kLineDataList.length - 40].timestamp },\n        drawExtend: (params) => {\n          const { ctx, coordinate, isActive } = params\n          if (isActive) {\n            annotationDrawExtend(ctx, coordinate, '这是一个鼠标移入显示标记')\n          }\n        }\n      }, {\n        point: { timestamp: kLineDataList[kLineDataList.length - 46].timestamp },\n        styles: {\n          symbol: {\n            type: 'triangle'\n          }\n        }\n      }, {\n        point: {\n          timestamp: kLineDataList[kLineDataList.length - 45].timestamp, price: kLineDataList[kLineDataList.length - 45].high\n        },\n        styles: {\n          symbol: {\n            position: 'point',\n            offset: [0, -30]\n          }\n        }\n      }\n    ])\n    return () => {\n      dispose('custom-candle-mark-k-line')\n    }\n  }, [])\n  return (\n    <Layout\n      title=\"自定义蜡烛图标记\">\n      <div id=\"custom-candle-mark-k-line\" className=\"k-line-chart\"/>\n    </Layout>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}